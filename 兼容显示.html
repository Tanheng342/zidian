<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<style type="text/css">
		#div1{height: 200px;
             width: 200px;
             background: #00f;
		      }
		#div2{height: 50px;
             width: 50px;
             background: #0ff;
		      }      
	</style>
</head>
<body>
<div id="div1">
	<div id="div2"></div>
</div>
<button id="btn">关闭</button>
<script type="text/javascript">
    function test(){
    	console.log('div2 is clicked 1')
    }
    addEvent($('#div2'),'click',test)

$('#btn').onclick = function(){
	removeEvent($('#div2'),'click',test)
}

  //封装添加事件监听函数
  function addEvent(dom , type, fun ){
         // dom  元素对象
         // type 事件类别 如“ click” 字符串
         // fun  调用函数
    if(dom.addEventListener){
    	dom.addEventListener(type,fun,false)
    }else{
    	dom.addEvent('on'+type,fun)
    }
  }
//移除添加事件监听函数
  function removeEvent(dom , type, fun ){
         // dom  元素对象
         // type 事件类别 如“ click” 字符串
         // fun  调用函数
    if(dom.removeEventListener){
    	dom.removeEventListener(type,fun)
    }else{
    	dom.detachEvent('on'+type,fun)
    }
  }


   function $(selector, root){
            if(!root){
                root = document;
            }
            var starter = selector.charAt(0); // 获取选择器的第一个字符
            if(starter == "#"){
                return document.getElementById(selector.substring(1));
            } else if(starter == "."){
                return root.getElementsByClassName(selector.substring(1));
            } else {
                return root.getElementsByTagName(selector);
            }
        }
</script>
</body>
</html>